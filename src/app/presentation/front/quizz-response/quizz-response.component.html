<header>
  <div class="nav-front">
    <div class="container">
      <h1>{{quiz.name}}</h1>
      <p>{{quiz.description}}
      </p>
    </div>
  </div>
</header>
<app-loader [load]="loadingQuiz"></app-loader>
<div class="front-rubrique">
  <div class="container" *ngFor="let rubrique of quiz.rubriques; let i=index">
    <div [class.hidden-content]="i !== activeRubrique">
      <div class="paginate-rubrique">
        <ul>
          <li *ngFor="let nbRubrique of quiz.rubriques; let j=index">
            <span [class.actived]="(j < activeRubrique && j > 0 || j === 0)"
                  [class.active]="j === activeRubrique"
                  (click)="jumpTo(j)"></span>
            <em *ngIf="j === activeRubrique" class="rubric-name">{{rubrique.name}}</em>
          </li>
        </ul>
      </div>
      <div class="order">
        <p>
          <a>Rubrique
            <span>{{i+1}}</span> sur
            <span>{{quiz.rubriques.length}}</span>
          </a>
        </p>
      </div>
      <!-- images -->
      <!-- <div class="contenu">
        <img src="/assets/images/drop/1.jpg" alt="">
      </div> -->
      <ng-container *ngFor="let metacontent of rubrique.meta_contents">
        <ng-container *ngIf="metacontent.type === 'image'">
          <app-front-image [content]="metacontent.content"></app-front-image>
        </ng-container>
        <div class="contenu" *ngIf="metacontent.type === 'video'">
          <app-front-video></app-front-video>
        </div>
        <div class="contenu" *ngIf="metacontent.type === 'textwysig'">    
          <div [innerHtml]="metacontent.content"></div>
        </div>
      </ng-container>     

      <form [formGroup]="forms[i]" *ngIf="forms[i]">
        <ng-container *ngFor="let question of rubrique.questions">
          
          <!-- choix multiple -->
          <div class="contenu " *ngIf="question.type_question?.slug === 'multiple_choice'">
            <app-front-multiple-choice [question]="question"></app-front-multiple-choice>
          </div>

          <!-- Case acocher -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'checkbox'">
            <app-front-checkbox></app-front-checkbox>
          </div>

          <!-- video -->
          

          <!-- question court -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'short_answer'">
            <app-front-short-answer [question]="question" [formControlName]="'control-'+question.id"
            [(ngModel)]="question.user_answer"></app-front-short-answer>
          </div>
          <!-- Question (échelle linéaire)  -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'linear_scale'">
            <app-front-linear-scal></app-front-linear-scal>
          </div>

          <!-- Date  -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'date'">
            <app-front-date></app-front-date>
          </div>

          <!-- time  -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'hour'">
            <app-front-hour></app-front-hour>
          </div>
          <!-- reponse longue  -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'width_answer'">
            <app-front-long-answer></app-front-long-answer>
          </div>

          <!-- liste déroulante  -->
          <div class="contenu" *ngIf="question.type_question?.slug === 'list_scroll'">
            <app-front-list-scroll></app-front-list-scroll>
          </div>

        </ng-container>
      </form>
    </div>
  </div>
  <!-- fin container -->

  <!-- voire correction -->
  <div class="contenu-header">
    <div class="container">
      <h1 class="title">Merci d’avoir
        <br class="bloc" />répondu au quizz !
        <br/>
        <small>Votre score final est de 0/8.</small>
      </h1>
      <p>Vous pouvez consultez le détail de vos points et la correction en cliquant ci-dessous :</p>
      <button class="btn btn-one">Voir la correction</button>
    </div>
  </div>






  <!-- question liste deroullant -->

  <div class="contenu correction barre-verticale-r">
    <span class="mon-point">0/4 points</span>
    <p class="title">Question (liste déroulante)</p>
    <p class="relative">
      <span class="tb-cell nb-400 padd red">Votre reponse</span>
      <i class="absolute after-question">
        <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 6.4L17.6 5 12 10.6 6.4 5 5 6.4l5.6 5.6L5 17.6 6.4 19l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z" fill="#D0021B" fill-rule="evenodd"></path>
        </svg>
      </i>
    </p>
    <p>
      <span class="nb-400 padd green">Réponse 2</span>
    </p>
    <p>
      <span class=" nb-400 padd red">Réponse 3</span>
    </p>
    <p>
      <span class=" nb-400 padd red">Réponse 4</span>
    </p>
    <p>
      <span class="nb-400 padd red">Réponse 5</span>
    </p>
    <p>
      <span class="nb-400 padd green">Réponse 6</span>
    </p>
    <div class="explicatif">
      <p>
        <span class="color">Explicatif</span>
        <br/> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna
        aliqua.
      </p>
    </div>
  </div>

  <!-- ECHELLE LINEAIRE -->

  <div class="contenu correction">
    <span class="mon-point">0/4 points</span>
    <p class="title">Question (Echelle linéaire)</p>
    <div class="E-lineaire">
      <ul>
        <li>
          <em class="rubric-name flou">Rubrique name</em>
          <span></span>
        </li>
        <li>
          <span></span>
        </li>
        <li>
          <span class="active"></span>
        </li>
        <li>
          <span></span>
        </li>
        <li>
          <em class="rubric-name flou">Rubrique name</em>
          <span></span>
        </li>
      </ul>
    </div>
    <div class="explicatif">
      <p>
        <span class="color">Explicatif</span>
        <br/> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna
        aliqua.
      </p>
    </div>
  </div>

  <div class="contenu">
    <p class="title">Question (choix multiple)</p>
    <ul class="progress-bare">
      <li class="ma-rep">
        <p>reponse 1</p>
        <progressbar [value]="15"><span class="absolute">14%</span></progressbar>
      </li>
      <li class="rep">
        <p>reponse 2</p>
        <progressbar [value]="76"><span class="absolute">76%</span></progressbar>
      </li>
      <li class="rep">
        <p>reponse 3</p>
        <progressbar [value]="10"><span class="absolute">10%</span></progressbar>
      </li>
    </ul>
  </div>

  <!-- FINALE SCORE collapse rubrique-->
  <div class="contenu pad-contenu-collaps container">
    <div class="order">
      <p>
        <a>Total des points rubrique 1 :
          <span>0</span>/
          <span>3</span>
        </a>
      </p>
      <button type="button" (click)="isCollapsed = !isCollapsed" [attr.aria-expanded]="!isCollapsed" aria-controls="collapseBasic">
        <span class="caret"></span>
      </button>
    </div>
    <div id="collapseBasic" [collapse]="isCollapsed" class="card card-block card-header">
      <div class="well well-lg">

        <!-- choix multiple voire correction -->
        <div class="contenu correction barre-verticale-g">
          <span class="mon-point">1/2 points</span>
          <p class="title">Question (choix multiples)</p>
          <mat-radio-group>

            <mat-radio-button value="1">
              <span class="nb-400 padd green">Réponse 1</span>
              <i class="after-question">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#22BC3F" fill-rule="evenodd" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z" />
                </svg>
              </i>
            </mat-radio-button>
            <mat-radio-button value="2">
              <span class="nb-400 padd green">Réponse 2</span>
              <i class="after-question">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#22BC3F" fill-rule="evenodd" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z" />
                </svg>
              </i>
            </mat-radio-button>
            <mat-radio-button value="3">
              <span class="nb-400 padd red">Réponse 3</span>
              <i class="after-question">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#D0021B" fill-rule="evenodd" d="M19 6.4L17.6 5 12 10.6 6.4 5 5 6.4l5.6 5.6L5 17.6 6.4 19l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"
                  />
                </svg>
              </i>
            </mat-radio-button>
          </mat-radio-group>
          <div class="explicatif">
            <p>
              <span class="color">Explicatif</span>
              <br/> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore
              magna aliqua.</p>
          </div>
        </div>
        <!-- Case acocher correction -->
        <div class="contenu correction barre-verticale-r">
          <p class="title">Question (cases à cocher)</p>
          <mat-radio-group>
            <mat-checkbox>
              <span class="nb-400 padd green">Réponse 1</span>
              <i class="after-question">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#22BC3F" fill-rule="evenodd" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z" />
                </svg>
              </i>
            </mat-checkbox>
            <mat-checkbox>
              <span class="nb-400 padd red">Réponse 2</span>
              <i class="after-question">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#D0021B" fill-rule="evenodd" d="M19 6.4L17.6 5 12 10.6 6.4 5 5 6.4l5.6 5.6L5 17.6 6.4 19l5.6-5.6 5.6 5.6 1.4-1.4-5.6-5.6z"
                  />
                </svg>
              </i>
            </mat-checkbox>

            <mat-checkbox>
              <span class="nb-400 padd green">Réponse 3</span>
              <i class="after-question">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#22BC3F" fill-rule="evenodd" d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z" />
                </svg>
              </i>
            </mat-checkbox>
          </mat-radio-group>
        </div>

        <!-- question court -->
        <div class="contenu">
          <p class="title">Question (réponse courte)</p>
          <div class="myrow textarea">
            <mat-form-field class="example-full-width">
              <textarea matInput placeholder="votre reponse"></textarea>
            </mat-form-field>
          </div>
          <div class="explicatif">
            <p>
              <span class="color">Explicatif</span>
              <br/> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore
              magna aliqua.</p>
          </div>
          <div class="obligatoire">Obligatoire</div>
        </div>

      </div>
    </div>

    <div class="order">
      <p>
        <a>Rubrique 2 </a>
      </p>
      <button mat-button [matMenuTriggerFor]="menu">
        <span class="caret"></span>
      </button>
      <button type="button" (click)="isCollapsed1 = !isCollapsed1" [attr.aria-expanded]="!isCollapsed1" aria-controls="collapseBasic2">
        <span class="caret"></span>
      </button>
    </div>

    <div id="collapseBasic2" [collapse]="isCollapsed1" class="card card-block card-header">
      <div class="well well-lg">
        <!-- video -->
        <div>
          <div id="result "></div>
          <div>
            <img>
          </div>
          <div class="clear"></div>
        </div>

        <!-- question court -->
        <div class="contenu">
          <p class="title">Question (réponse courte)</p>
          <div class="myrow textarea">
            <mat-form-field class="example-full-width">
              <textarea matInput placeholder="votre reponse"></textarea>
            </mat-form-field>
          </div>
          <div class="explicatif">
            <p>
              <span class="color">Explicatif</span>
              <br/> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore
              magna aliqua.</p>
          </div>
          <div class="obligatoire">Obligatoire</div>
        </div>

      </div>
    </div>


    <div class="order">
      <p>
        <a>Total des points rubrique 3 :
          <span>0</span>/
          <span>5</span>
        </a>
      </p>
      <button mat-button [matMenuTriggerFor]="menu">
          <span class="caret"></span>
        </button>
        <button type="button" (click)="isCollapsed3 = !isCollapsed3" [attr.aria-expanded]="!isCollapsed3" aria-controls="collapseBasic3">
          <span class="caret"></span>
        </button>
        <mat-menu #menu="matMenu"></mat-menu>
    </div>
    <div id="collapseBasic3" [collapse]="isCollapsed3" class="card card-block card-header">
        <div class="well well-lg">
          <!-- video -->
          <div>
            <div id="result "></div>
            <div>
              <img>
            </div>
            <div class="clear"></div>
          </div>
  
          <!-- question court -->
          <div class="contenu">
            <p class="title">Question (réponse courte)</p>
            <div class="myrow textarea">
              <mat-form-field class="example-full-width">
                <textarea matInput placeholder="votre reponse"></textarea>
              </mat-form-field>
            </div>
            <div class="explicatif">
              <p>
                <span class="color">Explicatif</span>
                <br/> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore
                magna aliqua.</p>
            </div>
            <div class="obligatoire">Obligatoire</div>
          </div>
  
        </div>
      </div>
  </div>

  <!-- FIN -->


  <div class="new-page">
    <p class="retoure" (click)="previous()">Retour</p>
    <p class="suivant" (click)="next()">suivant</p>
  </div>
</div>